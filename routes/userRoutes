
const express = require('express');
const router = express.Router();
const betModel = require('../models/user.js');

router.route('/user')

        .post('/',if (req.body.email &&
   req.body.username &&
    req.body.password && req.body.name && req.body.surname && req.body.birthday && req.body.gender ) {

    var userData = {
      email: req.body.email,
      username: req.body.username,
      password: req.body.password,
      name:req.body.name,
      surname: req.body.surname,  
      birthday: req.body.birthday,     
      gender: req.body.gender
}

    User.create(userData, function (error, user) {
      if (error) {
        return next(error);
      } else {
        req.session.username = userData.username;
      console.log(req.session.username);
   return res.redirect('/profile');
      }
    });

  }  else {
    var err = new Error('All fields required.');
    err.status = 400;
    return next(err);
  }
})



)




